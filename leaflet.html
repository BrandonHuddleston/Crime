<!DOCTYPE html>
<html>

<head>

    <!-- Leaflet CDN, CSS/Javascript -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
  crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
  crossorigin=""></script>

<!-- MapQuest APIs, Javascript -->
  <script src="https://www.mapquestapi.com/sdk/leaflet/v2.2/mq-map.js?key=6RHaXG5h6NsBxqDGSe1ay54qfbq31qnl"></script>
<script src="https://www.mapquestapi.com/sdk/leaflet/v2.2/mq-geocoding.js?key=6RHaXG5h6NsBxqDGSe1ay54qfbq31qnl"></script>

<script src="https://api.mqcdn.com/sdk/place-search-js/v1.0.0/place-search.js"></script>
    <link type="text/css" rel="stylesheet" href="https://api.mqcdn.com/sdk/place-search-js/v1.0.0/place-search.css"/>
    <script src="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.js"></script>
    <link type="text/css" rel="stylesheet" href="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>
    <script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>

</head>

<body>
    <input type="search" placeholder="Search City" id="search-bar">
    <input type="button" value="GO!" id="search-button">

    <div id="mapid" style="width: 500px; height: 500px;"></div>









    <script>

var longitude;
var latitude;
var map = L.map('mapid')

// function clearMap (){
//   map.remove();
// }

function mapLocation(latitude, longitude) {
         map.setView([latitude, longitude], 13);
console.log(map);

L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox.streets',
    accessToken: 'pk.eyJ1Ijoiam90Z3oiLCJhIjoiY2szYnNyMW94MHJ2bTNwbWh5OXRieTRuZiJ9.VSEzFv1tyPcznHLwTt1CHA'
}).addTo(map);

var marker = L.marker([latitude, longitude]).addTo(map);
marker.bindPopup("<b>Hello world!</b><br>I am in Uptown CLT").openPopup();
}



$("#search-button").click( function(){
  var searchCity = $("#search-bar").val();
    var queryURL = "https://www.mapquestapi.com/search/v2/radius?origin="+searchCity+"&radius=1&maxMatches=3&ambiguities=ignore&hostedData=mqap.ntpois|group_sic_code=?|581208&outFormat=json&key=6RHaXG5h6NsBxqDGSe1ay54qfbq31qnl"
    $.ajax({
        url: queryURL,
        method: "GET"
    }).then(function (response) {
        console.log(response)

        
        longitude = response.origin.displayLatLng.lng;
        latitude = response.origin.displayLatLng.lat;

       mapLocation(latitude, longitude);
      //  clearMap();
        });
});



  

    
// L.mapquest.key = '6RHaXG5h6NsBxqDGSe1ay54qfbq31qnl';

// // 'map' refers to a <div> element with the ID map
// L.mapquest.map('map', {
//   center: [37.7749, -122.4194],
//   layers: L.mapquest.tileLayer('map'),
//   zoom: 12
// });

// placeSearch({
//     key: '6RHaXG5h6NsBxqDGSe1ay54qfbq31qnl',
//     container: document.querySelector('#place-search-input')
//   });
    </script>


</body>



</html>